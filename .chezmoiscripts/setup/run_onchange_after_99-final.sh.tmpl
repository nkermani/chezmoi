#!/bin/bash
{{ include ".chezmoitemplates/env.sh.tmpl" }}

# --- FINALIZATION ---
if [[ "$SHELL" != */zsh ]]; then
    echo "ðŸš Setting default shell to Zsh..."
    chsh -s $(which zsh)
fi

# --- TERMINFO FALLBACKS ---
echo "ðŸ–¥ï¸  Setting up terminfo fallbacks..."
mkdir -p "$HOME/.terminfo"
if ! tput -T alacritty colors &>/dev/null; then
    echo "  ðŸš€ Adding alacritty fallback..."
    infocmp xterm-256color | sed 's/xterm-256color/alacritty/' | tic -o "$HOME/.terminfo" -
fi

echo "-------------------------------------------------------"
echo "âœ… Deployment Successful!"
echo "âœ¨ Restart your terminal or run 'source ~/.zshrc'"
echo "-------------------------------------------------------"

chmod +x "$HOME/.nkermani/bin/kitty" "$HOME/.nkermani/bin/kitten" "$HOME/.nkermani/bin/42/"* 2>/dev/null
echo "âœ… Deployment Successful!"
echo "âœ¨ Restart your terminal or run 'source ~/.zshrc'"
echo "-------------------------------------------------------"

