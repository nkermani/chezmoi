#!/usr/bin/env bash

# DÃ©tection de l'outil de copie
if [[ -n "${WSL_DISTRO_NAME:-}" ]] || grep -qiE 'microsoft|wsl' /proc/version 2>/dev/null; then
    # WSL2 -> Windows Clipboard
    if command -v win32yank.exe >/dev/null 2>&1; then
        win32yank.exe -i --crlf
    elif command -v clip.exe >/dev/null 2>&1; then
        clip.exe
    elif command -v powershell.exe >/dev/null 2>&1; then
        powershell.exe -NoProfile -Command "Set-Clipboard"
    else
        cat > /dev/null
    fi
elif [[ "$(uname)" == "Darwin" ]]; then
    # macOS -> pbcopy
    pbcopy
else
    # Linux -> xclip ou wl-copy
    if command -v xclip >/dev/null 2>&1; then
        xclip -selection clipboard -i
    elif command -v wl-copy >/dev/null 2>&1; then
        wl-copy
    else
        # Fallback : on ne fait rien, l'OSC 52 de tmux tentera le coup
        cat > /dev/null
    fi
fi
