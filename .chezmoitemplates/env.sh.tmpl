# --- Environment Initialization ---
NK_DIR="$HOME/.nkermani"
APPS_DIR="$NK_DIR/apps"
BIN_DIR="$NK_DIR/bin"
LSP_BIN_DIR="$NK_DIR/bin/lsp"

mkdir -p "$APPS_DIR" "$BIN_DIR" "$LSP_BIN_DIR"

OS_TYPE=$(uname -s)
ARCH_TYPE=$(uname -m)
IS_WSL=""
if [[ "$OS_TYPE" == "Linux" ]]; then
    if [[ -f /proc/sys/kernel/osrelease ]] && grep -qi "microsoft" /proc/sys/kernel/osrelease; then
        IS_WSL="true"
    elif grep -qi "microsoft" /proc/version 2>/dev/null; then
        IS_WSL="true"
    fi
fi

# Template Variables
IS_42="{{ .is_42 }}"
HAS_SUDO="{{ .has_sudo }}"

# Update PATH for the script execution
export PATH="$LSP_BIN_DIR:$BIN_DIR:$PATH"

