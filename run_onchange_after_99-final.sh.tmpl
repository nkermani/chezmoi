#!/bin/bash
{{ include ".chezmoitemplates/env.sh.tmpl" }}

# --- FINALIZATION ---
if [[ "$SHELL" != */zsh ]]; then
    echo "ðŸš Setting default shell to Zsh..."
    chsh -s $(which zsh)
fi

# --- TERMINFO FALLBACKS ---
echo "ðŸ–¥ï¸  Setting up terminfo fallbacks..."
mkdir -p "$HOME/.terminfo"
if ! tput -T xterm-kitty colors &>/dev/null; then
    echo "  ðŸ± Adding xterm-kitty fallback..."
    infocmp xterm-256color | sed 's/xterm-256color/xterm-kitty/' | tic -o "$HOME/.terminfo" -
fi
if ! tput -T zellij colors &>/dev/null; then
    echo "  ðŸªŸ Adding zellij fallback..."
    infocmp xterm-256color | sed 's/xterm-256color/zellij/' | tic -o "$HOME/.terminfo" -
fi

echo "-------------------------------------------------------"
echo "âœ… Deployment Successful!"
echo "âœ¨ Restart your terminal or run 'source ~/.zshrc'"
echo "-------------------------------------------------------"

